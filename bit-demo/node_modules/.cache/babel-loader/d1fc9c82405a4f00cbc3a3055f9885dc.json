{"ast":null,"code":"\"use strict\";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.LaneSelector=void 0;const react_1=__importStar(require(\"react\"));const classnames_1=__importDefault(require(\"classnames\"));const evangelist_surfaces_dropdown_1=require(\"@teambit/evangelist.surfaces.dropdown\");const lanes_ui_models_lanes_model_1=require(\"@teambit/lanes.ui.models.lanes-model\");const lane_menu_item_1=require(\"./lane-menu-item\");const lane_placeholder_1=require(\"./lane-placeholder\");const lane_grouped_menu_item_1=require(\"./lane-grouped-menu-item\");const lane_search_1=require(\"./lane-search\");const lane_selector_module_scss_1=__importDefault(require(\"./lane-selector.module.scss\"));function LaneSelector(_a){var{className,lanes,selectedLaneId,groupByScope=true}=_a,rest=__rest(_a,[\"className\",\"lanes\",\"selectedLaneId\",\"groupByScope\"]);const[filteredLanes,setFilteredLanes]=(0,react_1.useState)(lanes);const[focus,setFocus]=(0,react_1.useState)(false);(0,react_1.useEffect)(()=>{setFilteredLanes(lanes);},[lanes]);const multipleLanes=lanes.length>1;const laneDropdownItems=groupByScope?Array.from(lanes_ui_models_lanes_model_1.LanesModel.groupByScope(filteredLanes).entries()):filteredLanes;const handleOnChange=e=>{e.stopPropagation();const searchTerm=e.target.value;if(!searchTerm||searchTerm===''){setFilteredLanes(lanes);}else{setFilteredLanes(value=>value.filter(laneId=>laneId.name.includes(searchTerm)));}};const onDropdownToggled=(_,open)=>{setFocus(open);};return react_1.default.createElement(evangelist_surfaces_dropdown_1.Dropdown,Object.assign({},rest,{open:!multipleLanes?false:undefined,dropClass:lane_selector_module_scss_1.default.menu,onChange:multipleLanes?onDropdownToggled:undefined,// @ts-ignore - mismatch between @types/react\nplaceholder:react_1.default.createElement(lane_placeholder_1.LanePlaceholder,{disabled:!multipleLanes,selectedLaneId:selectedLaneId,showScope:groupByScope}),className:(0,classnames_1.default)(className,lane_selector_module_scss_1.default.dropdown,!multipleLanes&&lane_selector_module_scss_1.default.disabled)}),multipleLanes&&react_1.default.createElement(\"div\",{className:lane_selector_module_scss_1.default.header},\"Switch lane\"),multipleLanes&&react_1.default.createElement(\"div\",{className:lane_selector_module_scss_1.default.search},react_1.default.createElement(lane_search_1.LaneSearch,{focus:focus,onChange:handleOnChange})),multipleLanes&&groupByScope&&laneDropdownItems.map(([scope,lanesByScope])=>react_1.default.createElement(lane_grouped_menu_item_1.LaneGroupedMenuItem,{key:scope,scope:scope,selected:selectedLaneId,current:lanesByScope})),multipleLanes&&!groupByScope&&laneDropdownItems.map(lane=>react_1.default.createElement(lane_menu_item_1.LaneMenuItem,{key:lane.toString(),selected:selectedLaneId,current:lane})));}exports.LaneSelector=LaneSelector;","map":null,"metadata":{},"sourceType":"module"}