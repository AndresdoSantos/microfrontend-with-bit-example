{"ast":null,"code":"\"use strict\";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.CodeCompareView=void 0;const react_1=require(\"@monaco-editor/react\");const design_ui_input_toggle_1=require(\"@teambit/design.ui.input.toggle\");const documenter_ui_heading_1=require(\"@teambit/documenter.ui.heading\");const classnames_1=__importDefault(require(\"classnames\"));const react_2=__importStar(require(\"react\"));const code_ui_code_compare_1=require(\"@teambit/code.ui.code-compare\");const design_ui_round_loader_1=require(\"@teambit/design.ui.round-loader\");const base_ui_theme_dark_theme_1=require(\"@teambit/base-ui.theme.dark-theme\");const code_compare_view_module_scss_1=__importDefault(require(\"./code-compare-view.module.scss\"));// a translation list of specific monaco languages that are not the same as their file ending.\nconst languageOverrides={ts:'typescript',tsx:'typescript',js:'javascript',jsx:'javascript',mdx:'markdown',md:'markdown'};function CodeCompareView({className,fileName}){const codeCompareContext=(0,code_ui_code_compare_1.useCodeCompare)();const[ignoreWhitespace,setIgnoreWhitespace]=(0,react_2.useState)(true);const monacoRef=(0,react_2.useRef)();const title=(0,react_2.useMemo)(()=>fileName===null||fileName===void 0?void 0:fileName.split('/').pop(),[fileName]);const language=(0,react_2.useMemo)(()=>{if(!fileName)return languageOverrides.ts;const fileEnding=fileName===null||fileName===void 0?void 0:fileName.split('.').pop();return languageOverrides[fileEnding||'']||fileEnding;},[fileName]);const codeCompareDataForFile=codeCompareContext===null||codeCompareContext===void 0?void 0:codeCompareContext.fileCompareDataByName.get(fileName);if(!codeCompareContext||codeCompareContext.loading||!codeCompareDataForFile)return null;const originalFileContent=codeCompareDataForFile.baseContent;const modifiedFileContent=codeCompareDataForFile.compareContent;const handleEditorDidMount=(_,monaco)=>{/**\n         * disable syntax check\n         * ts cant validate all types because imported files arent available to the editor\n         */monacoRef.current=monaco;if(monacoRef.current){monacoRef.current.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSemanticValidation:true,noSyntaxValidation:true});}};const onIgnoreWhitespaceToggled=()=>{setIgnoreWhitespace(exsitingState=>!exsitingState);};const diffEditor=react_2.default.createElement(react_1.DiffEditor,{modified:modifiedFileContent,original:originalFileContent,language:language,height:'100%',onMount:handleEditorDidMount,className:base_ui_theme_dark_theme_1.darkMode,theme:'vs-dark',options:{ignoreTrimWhitespace:ignoreWhitespace,readOnly:true},loading:react_2.default.createElement(\"div\",{className:code_compare_view_module_scss_1.default.loader},react_2.default.createElement(design_ui_round_loader_1.RoundLoader,null))});return react_2.default.createElement(\"div\",{key:`component-compare-code-view-${fileName}`,className:(0,classnames_1.default)(code_compare_view_module_scss_1.default.componentCompareCodeViewContainer,className)},react_2.default.createElement(\"div\",{className:code_compare_view_module_scss_1.default.fileName},react_2.default.createElement(documenter_ui_heading_1.H4,{size:\"xs\",className:code_compare_view_module_scss_1.default.fileName},react_2.default.createElement(\"span\",null,title))),react_2.default.createElement(\"div\",{className:code_compare_view_module_scss_1.default.ignoreWhitespaceControlContainer},react_2.default.createElement(\"div\",{className:code_compare_view_module_scss_1.default.toggleContainer},react_2.default.createElement(design_ui_input_toggle_1.Toggle,{checked:ignoreWhitespace,onInputChanged:onIgnoreWhitespaceToggled,className:code_compare_view_module_scss_1.default.toggle}),\"Ignore Whitespace\")),react_2.default.createElement(\"div\",{className:code_compare_view_module_scss_1.default.componentCompareCodeDiffEditorContainer},diffEditor));}exports.CodeCompareView=CodeCompareView;","map":null,"metadata":{},"sourceType":"module"}