{"ast":null,"code":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});exports.IssuesList=exports.IssuesClasses=void 0;const custom_module_resolution_used_1=require(\"./custom-module-resolution-used\");const import_non_main_files_1=require(\"./import-non-main-files\");const missing_components_1=require(\"./missing-components\");const missing_dependencies_on_fs_1=require(\"./missing-dependencies-on-fs\");const missing_dists_1=require(\"./missing-dists\");const missing_packages_dependencies_on_fs_1=require(\"./missing-packages-dependencies-on-fs\");const parse_errors_1=require(\"./parse-errors\");const relative_components_1=require(\"./relative-components\");const relative_components_authored_1=require(\"./relative-components-authored\");const resolve_errors_1=require(\"./resolve-errors\");const untracked_dependencies_1=require(\"./untracked-dependencies\");const legacy_inside_harmony_1=require(\"./legacy-inside-harmony\");const multiple_envs_1=require(\"./multiple-envs\");const missing_links_from_nm_to_src_1=require(\"./missing-links-from-nm-to-src\");const circular_dependencies_1=require(\"./circular-dependencies\");const duplicate_component_and_package_1=require(\"./duplicate-component-and-package\");exports.IssuesClasses={MissingPackagesDependenciesOnFs:missing_packages_dependencies_on_fs_1.MissingPackagesDependenciesOnFs,MissingComponents:missing_components_1.MissingComponents,UntrackedDependencies:untracked_dependencies_1.UntrackedDependencies,ResolveErrors:resolve_errors_1.ResolveErrors,RelativeComponents:relative_components_1.RelativeComponents,RelativeComponentsAuthored:relative_components_authored_1.RelativeComponentsAuthored,ParseErrors:parse_errors_1.ParseErrors,MissingDists:missing_dists_1.MissingDists,LegacyInsideHarmony:legacy_inside_harmony_1.LegacyInsideHarmony,MissingDependenciesOnFs:missing_dependencies_on_fs_1.MissingDependenciesOnFs,ImportNonMainFiles:import_non_main_files_1.ImportNonMainFiles,CustomModuleResolutionUsed:custom_module_resolution_used_1.CustomModuleResolutionUsed,MultipleEnvs:multiple_envs_1.MultipleEnvs,MissingLinksFromNodeModulesToSrc:missing_links_from_nm_to_src_1.MissingLinksFromNodeModulesToSrc,CircularDependencies:circular_dependencies_1.CircularDependencies,DuplicateComponentAndPackage:duplicate_component_and_package_1.DuplicateComponentAndPackage};class IssuesList{constructor(issues=[]){this.issues=issues;}get count(){return this.issues.length;}isEmpty(){return this.issues.length===0;}outputForCLI(){return this.issues.map(issue=>issue.outputForCLI()).join('');}toObject(){return this.issues.map(issue=>issue.toObject());}toObjectWithDataAsString(){return this.issues.map(issue=>Object.assign(Object.assign({},issue.toObject()),{data:issue.dataToString().trim()}));}add(issue){this.issues.push(issue);}delete(IssueClass){this.issues=this.issues.filter(issue=>!(issue instanceof IssueClass));}getIssue(IssueClass){return this.issues.find(issue=>issue instanceof IssueClass);}getIssueByName(issueType){return this.issues.find(issue=>issue.constructor.name===issueType);}getAllIssues(){return this.issues;}getAllIssueNames(){return this.issues.map(issue=>issue.constructor.name);}createIssue(IssueClass){const newIssue=new IssueClass();this.add(newIssue);return newIssue;}getOrCreate(IssueClass){return this.getIssue(IssueClass)||this.createIssue(IssueClass);}shouldBlockSavingInCache(){return this.issues.some(issue=>issue.isCacheBlocker);}shouldBlockTagging(){return this.issues.some(issue=>issue.isTagBlocker);}filterNonTagBlocking(){return new IssuesList(this.issues.filter(issue=>issue.isTagBlocker));}serialize(){return this.issues.map(issue=>({type:issue.constructor.name,data:issue.serialize()}));}static deserialize(data){if(!Array.isArray(data)){// probably old format, ignore it and return an empty IssuesList\nreturn new IssuesList();}const issues=data.map(issue=>{const ClassName=issue.type;if(!Object.keys(exports.IssuesClasses).includes(ClassName)){throw new Error(`issue type \"${ClassName}\" is not recognized.\nthe following are permitted ${Object.keys(exports.IssuesClasses).join(', ')}`);}const issueInstance=new exports.IssuesClasses[ClassName]();issueInstance.data=issueInstance.deserialize(issue.data);return issueInstance;});return new IssuesList(issues);}}exports.IssuesList=IssuesList;","map":null,"metadata":{},"sourceType":"module"}