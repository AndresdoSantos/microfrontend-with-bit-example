{"ast":null,"code":"\"use strict\";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.CompositionCompare=void 0;const component_ui_compare_1=require(\"@teambit/component.ui.compare\");const compositions_1=require(\"@teambit/compositions\");const compositions_ui_hooks_use_composition_1=require(\"@teambit/compositions.ui.hooks.use-composition\");const design_ui_round_loader_1=require(\"@teambit/design.ui.round-loader\");const query_string_1=__importDefault(require(\"query-string\"));const react_1=__importStar(require(\"react\"));const composition_compare_module_scss_1=__importDefault(require(\"./composition-compare.module.scss\"));const composition_dropdown_1=require(\"./composition-dropdown\");function CompositionCompare(props){const{emptyState}=props;const component=(0,component_ui_compare_1.useComponentCompare)();const base=component===null||component===void 0?void 0:component.base;const compare=component===null||component===void 0?void 0:component.compare;const baseCompositions=base===null||base===void 0?void 0:base.model.compositions;const compareCompositions=compare===null||compare===void 0?void 0:compare.model.compositions;const selectedCompositionBaseFile=(0,component_ui_compare_1.useCompareQueryParam)('compositionBaseFile');const selectedCompositionCompareFile=(0,component_ui_compare_1.useCompareQueryParam)('compositionCompareFile');const selectedBaseComp=selectedCompositionBaseFile&&baseCompositions&&baseCompositions.find(c=>c.identifier===selectedCompositionBaseFile)||baseCompositions&&baseCompositions[0];const selectedCompareComp=selectedCompositionCompareFile&&compareCompositions&&compareCompositions.find(c=>c.identifier===selectedCompositionCompareFile)||compareCompositions&&compareCompositions[0];const baseCompositionDropdownSource=(baseCompositions===null||baseCompositions===void 0?void 0:baseCompositions.map(c=>{const href=(0,component_ui_compare_1.useUpdatedUrlFromQuery)({compositionBaseFile:c.identifier,compositionCompareFile:selectedCompareComp===null||selectedCompareComp===void 0?void 0:selectedCompareComp.identifier});return{id:c.identifier,label:c.displayName,value:href};}))||[];const compareCompositionDropdownSource=(compareCompositions===null||compareCompositions===void 0?void 0:compareCompositions.map(c=>{const href=(0,component_ui_compare_1.useUpdatedUrlFromQuery)({compositionBaseFile:selectedBaseComp===null||selectedBaseComp===void 0?void 0:selectedBaseComp.identifier,compositionCompareFile:c.identifier});return{id:c.identifier,label:c.displayName,value:href};}))||[];const[baseCompositionParams,setBaseCompositionParams]=(0,react_1.useState)({});const baseCompQueryParams=(0,react_1.useMemo)(()=>query_string_1.default.stringify(baseCompositionParams),[baseCompositionParams]);const[compareCompositionParams,setCompareCompositionParams]=(0,react_1.useState)({});const compareCompQueryParams=(0,react_1.useMemo)(()=>query_string_1.default.stringify(compareCompositionParams),[compareCompositionParams]);const selectedBaseDropdown=selectedBaseComp&&{id:selectedBaseComp.identifier,label:selectedBaseComp.displayName};const selectedCompareDropdown=selectedCompareComp&&{id:selectedCompareComp.identifier,label:selectedCompareComp.displayName};const BaseLayout=(0,react_1.useMemo)(()=>{if((component===null||component===void 0?void 0:component.base)===undefined){return react_1.default.createElement(react_1.default.Fragment,null);}return react_1.default.createElement(\"div\",{className:composition_compare_module_scss_1.default.subView},react_1.default.createElement(compositions_ui_hooks_use_composition_1.CompositionContextProvider,{queryParams:baseCompositionParams,setQueryParams:setBaseCompositionParams},react_1.default.createElement(compositions_1.CompositionContent,{emptyState:emptyState,component:component===null||component===void 0?void 0:component.base.model,selected:selectedBaseComp,queryParams:baseCompQueryParams})));},[component===null||component===void 0?void 0:component.base,selectedBaseComp]);const CompareLayout=(0,react_1.useMemo)(()=>{if((component===null||component===void 0?void 0:component.compare)===undefined){return react_1.default.createElement(react_1.default.Fragment,null);}return react_1.default.createElement(\"div\",{className:composition_compare_module_scss_1.default.subView},react_1.default.createElement(compositions_ui_hooks_use_composition_1.CompositionContextProvider,{queryParams:compareCompositionParams,setQueryParams:setCompareCompositionParams},react_1.default.createElement(compositions_1.CompositionContent,{emptyState:emptyState,component:component.compare.model,selected:selectedCompareComp,queryParams:compareCompQueryParams})));},[component===null||component===void 0?void 0:component.compare,selectedCompareComp]);function CompositionDropdowns(){if(baseCompositionDropdownSource.length<0&&compareCompositionDropdownSource.length<0){return react_1.default.createElement(react_1.default.Fragment,null);}return react_1.default.createElement(\"div\",{className:composition_compare_module_scss_1.default.dropdownContainer},react_1.default.createElement(\"div\",{className:composition_compare_module_scss_1.default.leftDropdown},baseCompositionDropdownSource.length>0&&react_1.default.createElement(composition_dropdown_1.CompositionDropdown,{dropdownItems:baseCompositionDropdownSource,selected:selectedBaseDropdown})),react_1.default.createElement(\"div\",{className:composition_compare_module_scss_1.default.rightDropdown},compareCompositionDropdownSource.length>0&&react_1.default.createElement(composition_dropdown_1.CompositionDropdown,{dropdownItems:compareCompositionDropdownSource,selected:selectedCompareDropdown})));}return react_1.default.createElement(react_1.default.Fragment,null,(component===null||component===void 0?void 0:component.loading)&&react_1.default.createElement(\"div\",{className:composition_compare_module_scss_1.default.loader},react_1.default.createElement(design_ui_round_loader_1.RoundLoader,null)),react_1.default.createElement(CompositionDropdowns,null),react_1.default.createElement(component_ui_compare_1.CompareSplitLayoutPreset,{base:BaseLayout,compare:CompareLayout}));}exports.CompositionCompare=CompositionCompare;","map":null,"metadata":{},"sourceType":"module"}