{"ast":null,"code":"\"use strict\";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.DetailedVersion=exports.SimpleVersion=void 0;const react_1=__importStar(require(\"react\"));const design_ui_styles_ellipsis_1=require(\"@teambit/design.ui.styles.ellipsis\");const classnames_1=__importDefault(require(\"classnames\"));const evangelist_elements_icon_1=require(\"@teambit/evangelist.elements.icon\");const design_ui_time_ago_1=require(\"@teambit/design.ui.time-ago\");const design_ui_avatar_1=require(\"@teambit/design.ui.avatar\");const version_dropdown_placeholder_module_scss_1=__importDefault(require(\"./version-dropdown-placeholder.module.scss\"));const getVersionDetailFromTags=(version,tags)=>tags.find(tag=>tag.tag===version);const getVersionDetailFromSnaps=(version,snaps)=>(snaps||[]).find(snap=>snap.hash===version);const getVersionDetails=(version,tags,snaps)=>{if(version==='workspace'||version==='new')return{version};return getVersionDetailFromTags(version,tags)||getVersionDetailFromSnaps(version,snaps);};function SimpleVersion({currentVersion,className,disabled,tags,snaps}){const showArrowDown=(0,react_1.useMemo)(()=>(snaps||[]).concat(tags).length>1,[tags,snaps]);const versionDetails=(0,react_1.useMemo)(()=>getVersionDetails(currentVersion,tags,snaps),[currentVersion,tags,snaps]);return react_1.default.createElement(\"div\",{className:(0,classnames_1.default)(version_dropdown_placeholder_module_scss_1.default.simple,className,disabled&&version_dropdown_placeholder_module_scss_1.default.disabled)},react_1.default.createElement(design_ui_styles_ellipsis_1.Ellipsis,{className:(0,classnames_1.default)(version_dropdown_placeholder_module_scss_1.default.versionName,(versionDetails===null||versionDetails===void 0?void 0:versionDetails.tag)&&version_dropdown_placeholder_module_scss_1.default.tag,!(versionDetails===null||versionDetails===void 0?void 0:versionDetails.tag)&&version_dropdown_placeholder_module_scss_1.default.snap)},currentVersion),showArrowDown&&react_1.default.createElement(evangelist_elements_icon_1.Icon,{of:\"fat-arrow-down\"}));}exports.SimpleVersion=SimpleVersion;function DetailedVersion({currentVersion,className,disabled,snaps,tags}){const showArrowDown=(0,react_1.useMemo)(()=>(snaps||[]).concat(tags).length>1,[tags,snaps]);const versionDetails=(0,react_1.useMemo)(()=>getVersionDetails(currentVersion,tags,snaps),[currentVersion,tags,snaps]);const timestamp=(0,react_1.useMemo)(()=>(versionDetails===null||versionDetails===void 0?void 0:versionDetails.date)?new Date(parseInt(versionDetails.date)).toString():new Date().toString(),[versionDetails===null||versionDetails===void 0?void 0:versionDetails.date]);const author=(0,react_1.useMemo)(()=>{return{displayName:versionDetails===null||versionDetails===void 0?void 0:versionDetails.username,email:versionDetails===null||versionDetails===void 0?void 0:versionDetails.email};},[versionDetails]);return react_1.default.createElement(\"div\",{className:(0,classnames_1.default)(version_dropdown_placeholder_module_scss_1.default.detailed,className,disabled&&version_dropdown_placeholder_module_scss_1.default.disabled)},react_1.default.createElement(design_ui_avatar_1.UserAvatar,{size:24,account:author,className:version_dropdown_placeholder_module_scss_1.default.versionUserAvatar,showTooltip:true}),react_1.default.createElement(design_ui_styles_ellipsis_1.Ellipsis,{className:(0,classnames_1.default)(version_dropdown_placeholder_module_scss_1.default.versionName,(versionDetails===null||versionDetails===void 0?void 0:versionDetails.tag)&&version_dropdown_placeholder_module_scss_1.default.tag,!(versionDetails===null||versionDetails===void 0?void 0:versionDetails.tag)&&version_dropdown_placeholder_module_scss_1.default.snap)},currentVersion),commitMessage(versionDetails===null||versionDetails===void 0?void 0:versionDetails.message),react_1.default.createElement(design_ui_styles_ellipsis_1.Ellipsis,{className:version_dropdown_placeholder_module_scss_1.default.versionTimestamp},react_1.default.createElement(design_ui_time_ago_1.TimeAgo,{date:timestamp})),showArrowDown&&react_1.default.createElement(evangelist_elements_icon_1.Icon,{of:\"fat-arrow-down\"}));}exports.DetailedVersion=DetailedVersion;function commitMessage(message){if(!message||message==='')return react_1.default.createElement(design_ui_styles_ellipsis_1.Ellipsis,{className:version_dropdown_placeholder_module_scss_1.default.emptyMessage},\"No commit message\");return react_1.default.createElement(design_ui_styles_ellipsis_1.Ellipsis,{className:version_dropdown_placeholder_module_scss_1.default.commitMessage},message);}","map":null,"metadata":{},"sourceType":"module"}