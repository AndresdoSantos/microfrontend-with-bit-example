{"ast":null,"code":"\"use strict\";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k];}});}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k];});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,\"default\",{enumerable:true,value:v});}:function(o,v){o[\"default\"]=v;});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!==\"default\"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result;};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{\"default\":mod};};Object.defineProperty(exports,\"__esModule\",{value:true});exports.ComponentCompareVersionPicker=void 0;const react_1=__importStar(require(\"react\"));const lodash_compact_1=__importDefault(require(\"lodash.compact\"));const component_ui_version_dropdown_1=require(\"@teambit/component.ui.version-dropdown\");const component_ui_compare_1=require(\"@teambit/component.ui.compare\");const component_1=require(\"@teambit/component\");const classnames_1=__importDefault(require(\"classnames\"));const component_compare_version_picker_module_scss_1=__importDefault(require(\"./component-compare-version-picker.module.scss\"));function ComponentCompareVersionPicker({className}){var _a;const component=(0,react_1.useContext)(component_1.ComponentContext);const componentCompare=(0,component_ui_compare_1.useComponentCompare)();const snaps=(0,react_1.useMemo)(()=>{const logs=component===null||component===void 0?void 0:component.logs;return(logs||[]).filter(log=>!log.tag).map(snap=>Object.assign(Object.assign({},snap),{version:snap.hash})).reverse();},[component===null||component===void 0?void 0:component.logs]);const tags=(0,react_1.useMemo)(()=>{var _a;const tagLookup=new Map();const logs=component===null||component===void 0?void 0:component.logs;(logs||[]).filter(log=>log.tag).forEach(tag=>{tagLookup.set(tag===null||tag===void 0?void 0:tag.tag,tag);});return(0,lodash_compact_1.default)((_a=component===null||component===void 0?void 0:component.tags)===null||_a===void 0?void 0:_a.toArray().reverse().map(tag=>tagLookup.get(tag.version.version))).map(tag=>Object.assign(Object.assign({},tag),{version:tag.tag}));},[component===null||component===void 0?void 0:component.logs]);const compareVersion=(componentCompare===null||componentCompare===void 0?void 0:componentCompare.compare.hasLocalChanges)?'workspace':componentCompare===null||componentCompare===void 0?void 0:componentCompare.compare.model.version;const baseVersion=(_a=componentCompare===null||componentCompare===void 0?void 0:componentCompare.base)===null||_a===void 0?void 0:_a.model.version;const key=`base-compare-version-dropdown-${componentCompare===null||componentCompare===void 0?void 0:componentCompare.compare.model.id.toString()}`;return react_1.default.createElement(\"div\",{className:component_compare_version_picker_module_scss_1.default.componentCompareVersionPicker},react_1.default.createElement(\"div\",{className:(0,classnames_1.default)(component_compare_version_picker_module_scss_1.default.titleText,component_compare_version_picker_module_scss_1.default.rightPad)},\"Comparing\"),react_1.default.createElement(component_ui_version_dropdown_1.VersionDropdown,{key:key,className:(0,classnames_1.default)(component_compare_version_picker_module_scss_1.default.componentCompareVersionContainer,component_compare_version_picker_module_scss_1.default.left,className),dropdownClassName:component_compare_version_picker_module_scss_1.default.componentCompareDropdown,placeholderClassName:component_compare_version_picker_module_scss_1.default.componentCompareVersionPlaceholder,menuClassName:(0,classnames_1.default)(component_compare_version_picker_module_scss_1.default.componentCompareVersionMenu,component_compare_version_picker_module_scss_1.default.showMenuOverNav),snaps:snaps,tags:tags,currentVersion:baseVersion,loading:componentCompare===null||componentCompare===void 0?void 0:componentCompare.loading,overrideVersionHref:_baseVersion=>{return(0,component_ui_compare_1.useUpdatedUrlFromQuery)({baseVersion:_baseVersion});},disabled:snaps.concat(tags).length<2,showVersionDetails:true}),react_1.default.createElement(\"div\",{className:component_compare_version_picker_module_scss_1.default.titleText},\"with\"),react_1.default.createElement(component_ui_version_dropdown_1.VersionDropdown,{className:(0,classnames_1.default)(component_compare_version_picker_module_scss_1.default.componentCompareVersionContainer,component_compare_version_picker_module_scss_1.default.right),dropdownClassName:component_compare_version_picker_module_scss_1.default.componentCompareDropdown,placeholderClassName:component_compare_version_picker_module_scss_1.default.componentCompareVersionPlaceholder,menuClassName:component_compare_version_picker_module_scss_1.default.componentCompareVersionMenu,snaps:snaps,tags:tags,disabled:true,loading:componentCompare===null||componentCompare===void 0?void 0:componentCompare.loading,currentVersion:compareVersion}));}exports.ComponentCompareVersionPicker=ComponentCompareVersionPicker;","map":null,"metadata":{},"sourceType":"module"}